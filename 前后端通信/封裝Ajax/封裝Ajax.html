<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>封装Ajax</title>
	</head>
	<body>
		<script type="module">
		import {ajax,get,getJSON,post} from './Ajax/index.js';
		
		const url = 'https://www.imooc.com/api/http/json/search/suggest?words=js';		

		const url2 = 'https://www.immooc.com/api/http/json/search/suggest?words=js'; //错误URL请求错误
		
		const p1 = post(url,{
			params:{school:'ShiYan'},
			//请求体携带数据用post
			data:{
			username:'alex',
			age:18
			}			
		});
		
		//p1.xhr.abort(); 取消请求
		
		const {ERROR_HTTP_CODE,
		ERROR_REQUEST,
		ERROR_TIMEOUT,
		ERROR_ABORT}=p1;
				
		
		p1.then(response=>{ //请求成功：
			console.log(response);
		}).catch(err=>{ //请求失败：
			
			switch(err.type){
				case ERROR_HTTP_CODE:
					console.log(err.text);
					break;
				case ERROR_REQUEST:
					console.log(err.text);
					break;
				case ERROR_TIMEOUT:
					console.log(err.text);
					break;
				case ERROR_ABORT:
					console.log(err.text);
					break;
			}

		});
		
		
			
			
		</script>
		
	</body>
</html>
