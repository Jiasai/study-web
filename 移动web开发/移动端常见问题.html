<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport"
		content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<title>移动端常见问题</title>
	<!-- 引入html5shiv文件解决html标签兼容 -->
	<script src="./js/html5shiv.min.js" type="text/javascript"></script>
	<style type="text/css">
		*{
			box-sizing: border-box;
			font-size: 13px;
		}
		/*header公共样式*/
		header {
			background: red;
			height: 50px;
		}
		/*经过modernizr检测，支持flexbox,使用flex布局实现垂直水平居中*/
		.flexbox header {
			display: -webkit-flex;
			display: -moz-box;
			display: -ms-flexbox;
			display: flex;
			-webkit-justify-content: center;
			-moz-box-pack: center;
			-ms-flex-pack: center;
			justify-content: center;
			-webkit-align-items: center;
			-moz-box-align: center;
			-ms-flex-align: center;
			align-items: center;

		}
		/*经过modernizr检测，不支持flexbox,使用兼容性样式实现垂直水平居中*/
		.no-flexbox header {
			text-align: center;
			line-height: 50px;
		}

		footer {
			background: green;
		}

		#btn{
			margin-bottom:20px;
		}
		.box{
			width:100px;
			height: 100px;
			background:green;
		}
		.item-box{
			float: 1;
			margin: 0 auto 20px;
			border:1px solid #ddd;
			padding-bottom:10px;
		}
		.item-box-img img{max-width: 100%;}
		.pires{color: red;font-size: 20px;display: inline-block;}
		.xiaoliang{
			float: right;
			color: #888;
		}
		.item-box-text{
			padding:5px 10px 5px;
		}
		.buyname{
			display: flex;
			justify-content: flex-start;
			align-items: center;
		}
		/*单行文字溢出*/
		.text-ellipsis{
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}
		/*多行文字溢出*/
		.multiline-ellipsis{
			overflow: hidden; 
			/* 溢出隐藏 */
			text-overflow: ellipsis;
			/* 溢出显示省略号 */
			white-space: normal !important;
			/* 文字不换行 */
			display: -webkit-box;
			-webkit-line-clamp:1;
			/* 控制显示1行 */
			-webkit-box-orient:vertical;
			word-wrap: break-word;
			/* 可以和flex布局同用 */
		}

		.modal-wrapper{
			width: 100%;
			height: 100%;
			background: rgba(0,0,0,0.8);
			color: #fff;
			position:fixed;
			top:0;
			left:0;
			z-index: 100;

			/*用父容器设置垂直水平居中*/
			/* display: flex;
			justify-content: center;
			align-items: center; */

		}
		.modal{
		background: #fff;
		color:#444;
		border:1px solid #777;
		border-radius: 15px;		
	}
		
/* 情况a：容器高度自适应，没有指定宽高，内容撑开 */
	/* a.1内联元素 不能设置宽高 内容撑开 */
		/* a.1-1文字水平垂直居中 多行文字 */
		/* .modal{
			display: inline;	
			padding: 10px 15px;
			
		} *//* 因为内联，不必要考虑 */

		/* a.1-2容器水平垂直居中 内联元素 */
		/* .modal{ 			
		position:absolute;
		left:50%;
		top:50%;
		transform: translate3d(-50%,-50%,0);
		} */


	/* a.2内联块元素，不能设置宽高 内容撑开  */
		/* a.2-1文字水平垂直居中 多行文字 */
		/* .modal{
			display: inline-block;	
			padding: 10px 15px;
		} */
		/* a.2-2容器水平垂直居中 内联块元素 */
		/* .modal{ 			
		position:absolute;
		left:50%;
		top:50%;
		transform: translate3d(-50%,-50%,0);
		} */


	/* a.3块元素 不能设置宽高 */
		/* a.3-1文字水平垂直居中 多行文字 */
		/* .modal{
			display: block;	
			text-align: center;
		} */

		/* a.3-2容器水平垂直居中 块元素 */
		/* .modal{
			position:absolute;
			left:50%;
			top:50%;
			transform: translate3d(-50%,-50%,0);
		} */

/* 情况b：指定容器的宽高 */
	/* b.1内联元素 不能设置宽高 内容撑开 */
		/* b.1-1文字水平垂直居中 多行文字 */
		.modal{
			display: inline;	
			/* 内联元素，本身不能指定宽高 */
		}

		/* b.1-2容器水平垂直居中 内联元素 */

	/* b.2内联块元素，不能设置宽高 内容撑开  */
		/* b.2-1文字水平垂直居中 多行文字 */
		/* .modal{
			display:inline-block;	
			width:200px;
			height: 100px; */

			/*单行文字垂直水平居中*/
			/* text-align: center;
			line-height: 100px; */

			/*多行文字*/
			/* display: flex;
			justify-content: center;
			align-items: center; */
		/* } */

		/* b.2-2容器水平垂直居中 内联块元素 */
		/* .modal{
			position:absolute;
			left:50%;
			top:50%;
			margin: -50px 0px 0px -100px;
		} */



	/* b.3块元素 不能设置宽高 */
		/* b.3-1文字水平垂直居中 多行文字 */
		.modal{
			display:block;	
			width:200px;
			height: 100px;

			/*单行文字垂直水平居中*/
			text-align: center;
			line-height: 100px;

			/*多行文字*/
			/* display: flex;
			justify-content: center;
			align-items: center; */
		}
		/* b.3-2容器水平垂直居中 块元素 */

		.modal{
			/*块元素，有固定宽度，用margin*/	
			position: relative;
			top:50%;
			margin: -50px auto 0px;
		}


/* 
总结：
1.万能的flex可以实现 文字和容器垂直水平居中；

2.不指定容器宽高，可以通过position定位和transform:translate3d让容器垂直水平居中；如果容器是内联元素，通过padding让文字垂直水平；如果容器是块元素，文字通过text-align:center 实现居中，通过padding实现垂直居中；

3.指定了容器的宽高，块元素可以通过：margin:0 auto;实现水平居中，通过position配合margin实现垂直居中；文字可以通过text-align:center实现水平居中，单行文字用line-height实现垂直居中，多行文字用flex实现；

4.常用通用方案：
position 和 transform:translate3d;不管元素有没有宽高，是不是内联、块级，统统可以实现容器垂直水平居中，
position:absolute;
left:50%;
top:50%;
transform: translate3d(-50%,-50%,0);
 */





	</style>
</head>

<body>
	<header>header标签</header>
	<article>article标签</article>
	<footer>footer标签</footer>
	<button id="btn">点击开始</button>
	<div class="box" id="box"></div>

	<p>单行文字溢出</p>
	<div class="item-box">
		<div class="item-box-img"><img src="./img/1.jpg" alt=""></div>
		<div class="item-box-text">
			<p class="buyname multiline-ellipsis">
				这是一个商品的标题这是一个商品的标题这是一个商品的标题这是一个商品的标题这是一个商品的标题这是一个商品的标题
			</p>
			<div class="pires">￥1000</div>
			<div class="xiaoliang">已售489</div>
		</div>
	</div>
	<div class="modal-wrapper">
		<span class="modal">单行文字垂直水平居</span>
	</div>
	<script src="./js/modernizr.js"></script>
	<script type="text/javascript">
		//引入html5shiv文件，保证IE9/8兼容 html5标签	
		//if(window.requestAnimationFrame){}//js浏览器特性检测

		//自己定义一个requestAnimationFrame,考虑兼容性
		var requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (fn) { setTimeout(fn, 16) };

		requestAnimationFrame(function () {
			console.log(1);
		});

		const btn=document.getElementById('btn'),
		box=document.getElementById('box');

		let speed=10;
		let moveWidth = window.innerWidth||document.documentElement.clientWidth;
		moveWidth = moveWidth-100;
		let position=0;

		const move=(el,position)=>{			
		el.style.transform=`translate3d(${position}px, 0px, 0px)`;
		}
		
		//css兼容性
		const setp=()=>{
			if(position<moveWidth){
				position += speed;
				move(box,position);
				requestAnimationFrame(setp);
				//不加requestAnimationFrame，就不是一帧一帧执行，不会有动画效果了；
			}else{
				position=moveWidth;
				move(box,position);
			}
		}


		
		btn.addEventListener('click',()=>{
			requestAnimationFrame(setp);
		},false);

		//通过 递归的方法，使用requestAnimationFrame做动画；
		
		document.querySelector('.modal-wrapper').addEventListener('click',function(){
			console.log(this);
			this.style.display='none';
		},false);

	</script>
</body>

</html>